// ||###################################################################################||
// ||                                                                                   ||
// ||  Day Trader Pre Market High and Low, Yesterday's High and Low, Daily High and Low ||
// ||  https://www.tradingview.com/script/1yLZ7nkU-BB-Indicator-Marks-High-and-low-of-premarket-daily-yesterday
// ||                                                                                   ||
// ||###################################################################################||
//https://www.tradingview.com/pine-script-docs
//https://www.tradingview.com/pine-script-reference/v5
//https://www.pinecoders.com/faq_and_code/
//https://www.tradingview.com/pine-script-docs/en/v4/language/Functions_and_annotations.html#exceptions

// varip (var intrabar persist) is the keyword used for assigning and one-time initializing of a variable. It is similar to the var keyword, but variables declared with varip retain their values between the updates of a real-time bar.
// varip variable_name = expression

//@version=5
// indicator(title='DayTrader Market Levels', shorttitle='DayTrader Market Levels',max_bars_back = 5000, max_lines_count = 500, max_boxes_count = 500 , max_labels_count=5, overlay=true)
indicator(title='DayTrader Candle Colors', shorttitle='DayTrader Candle Colors', max_lines_count = 500, max_boxes_count = 500 , max_labels_count=500, overlay=true, explicit_plot_zorder=true)

chartBackgroundColor = input.color(color.rgb(19, 23, 34,0), title='Chart Background Color', group='Colors') //#131722
chartDebugColor = input.color(color.new(#388e3c,50), title='Chart Debug Color', group='Colors') //#388e3c rgb(56,142,60,50)

//##################################################################################################
//Define some variables
//##################################################################################################
var colorCounter = 0
var colorCounterIncrement = 0
var int barsInADay=390

//t = time('1440', '0000-0930:23456')  // 1440 is the number of minutes in a whole day and 390 (bars) minutes in a trading day
var bool inSession = not na(time('1440', "0930-1600"))

//daily_timestamp=timestamp(2022, 09, 08, 09, 43, 22)

//This shows how the user can distinguish between regular session and extended hours bars by using the built-in time function rather than the time variable
// t = time(timeframe.period, "0930-1600")
// plot(na(t) ? 0 : 1)
daily_timestamp = request.security(symbol = syminfo.tickerid, timeframe = "D", expression = last_bar_time, gaps = barmerge.gaps_off, lookahead = barmerge.lookahead_on)
//todaysBars = ta.barssince(time("") == daily_timestamp)

// barssince() returns zero on the bar where the condition is met. Lengths, however, cannot be zero, so you need to ensure the length has a minimum value of one, which can be accomplished by using max(1, len).
// At the beginning of a dataset, until the condition is detected a first time, barssince() returns na, which also cannot be used as a length, so you must protect your calculation against this, which can be done by using nz(len).
// The length must be an “int”, so it is safer to cast the result of your length’s calculation to an “int” using int(len).
// Finally, a barssince() value of 0 must translate to a variable length of 1, and so on, so we must add 1 to the value returned by barssince().
//todaysBars = int(math.max(1, nz(ta.barssince(time("") == daily_timestamp)) + 1))
//todaysBars = int(math.max(0, nz(ta.barssince(time("") == daily_timestamp))))
todaysBars = int(math.max(1, nz(ta.barssince(time("") == daily_timestamp))))

var debugTable = table.new(position = position.bottom_right, columns = 1, rows = 1, bgcolor = chartDebugColor, border_width = 1, frame_color=color.red, border_color=color.red)

// //concat 2 arrays
arrayConcat(array1, array2) =>
    int array1LastIndex = array.size(array1)
    int array2Size = array.size(array2)
    for i = 0 to array2Size > 0 ? array2Size-1 : na
        array.insert(array1, array1LastIndex, array.get(array2,i))
        array1LastIndex += 1

// var allColors = array.copy(allColors)
var allColors = array.new_color(0)
var allColorsLabels = array.new_string(0)

if barstate.isfirst

    array.push(allColorsLabels,"#4CAF50")
    array.push(allColorsLabels,"#00E676")
    array.push(allColorsLabels,"#00897B")
    array.push(allColorsLabels,"#00FF80")
    array.push(allColorsLabels,"#00FF00")
    array.push(allColorsLabels,"#80FF00")

    array.push(allColorsLabels,"#008000")
    array.push(allColorsLabels,"#66b032")
    array.push(allColorsLabels,"#98fb98")
    array.push(allColorsLabels,"#90ee90")
    array.push(allColorsLabels,"#00ff00")
    array.push(allColorsLabels,"#32cd32")
    array.push(allColorsLabels,"#3cb371")
    array.push(allColorsLabels,"#228b22")

    array.push(allColorsLabels,"#ADFF2F")
    array.push(allColorsLabels,"#7CFC00")
    array.push(allColorsLabels,"#00FF00")
    array.push(allColorsLabels,"#228B22")
    array.push(allColorsLabels,"#008000")
    array.push(allColorsLabels,"#006400")

    array.push(allColorsLabels,"#228B22")
    array.push(allColorsLabels,"#359835")
    array.push(allColorsLabels,"#5AB15A")
    array.push(allColorsLabels,"#6CBE6C")
    array.push(allColorsLabels,"#7FCB7F")
    array.push(allColorsLabels,"#91D891")
    array.push(allColorsLabels,"#A4E4A4")
    array.push(allColorsLabels,"#B6F1B6")
    array.push(allColorsLabels,"#C9FEC9")

    array.push(allColorsLabels,"#006400")
    array.push(allColorsLabels,"#167516")
    array.push(allColorsLabels,"#2D862D")
    array.push(allColorsLabels,"#439743")
    array.push(allColorsLabels,"#59A859")
    array.push(allColorsLabels,"#70BA70")
    array.push(allColorsLabels,"#86CB86")
    array.push(allColorsLabels,"#9CDC9C")
    array.push(allColorsLabels,"#B3EDB3")
    array.push(allColorsLabels,"#C9FEC9")

    array.push(allColorsLabels,"#006400")
    array.push(allColorsLabels,"#137505")
    array.push(allColorsLabels,"#26860A")
    array.push(allColorsLabels,"#3A9810")
    array.push(allColorsLabels,"#4DA915")
    array.push(allColorsLabels,"#60BA1A")
    array.push(allColorsLabels,"#73CB1F")
    array.push(allColorsLabels,"#87DD25")
    array.push(allColorsLabels,"#9AEE2A")
    array.push(allColorsLabels,"#ADFF2F")


    array.push(allColorsLabels,"#9ACD32")
    array.push(allColorsLabels,"#87F717")
    array.push(allColorsLabels,"#B1FB17")
    array.push(allColorsLabels,"#ADFF2F")
    array.push(allColorsLabels,"#DAEE01")
    array.push(allColorsLabels,"#E2F516")

    array.push(allColorsLabels,"#00BFA5")



    array.push(allColorsLabels,"#A5D6A7")
    array.push(allColorsLabels,"#81C784")
    array.push(allColorsLabels,"#66BB6A")
    array.push(allColorsLabels,"#4CAF50")
    array.push(allColorsLabels,"#43A047")
    array.push(allColorsLabels,"#388E3C")
    array.push(allColorsLabels,"#2E7D32")
    array.push(allColorsLabels,"#1B5E20")
    array.push(allColorsLabels,"#69F0AE")
    array.push(allColorsLabels,"#00E676")
    array.push(allColorsLabels,"#00C853")



    array.push(allColorsLabels,"#C5E1A5")
    array.push(allColorsLabels,"#AED581")
    array.push(allColorsLabels,"#9CCC65")
    array.push(allColorsLabels,"#8BC34A")
    array.push(allColorsLabels,"#7CB342")
    array.push(allColorsLabels,"#689F38")
    array.push(allColorsLabels,"#558B2F")
    array.push(allColorsLabels,"#33691E")
    array.push(allColorsLabels,"#CCFF90")
    array.push(allColorsLabels,"#B2FF59")
    array.push(allColorsLabels,"#76FF03")
    array.push(allColorsLabels,"#64DD17")

    array.push(allColorsLabels,"#00FFFF")
    array.push(allColorsLabels,"#008B8B")
    array.push(allColorsLabels,"#008080")
    array.push(allColorsLabels,"#007474")
    array.push(allColorsLabels,"#004242")
    array.push(allColorsLabels,"#004040")
    array.push(allColorsLabels,"#AFEEEE")
    array.push(allColorsLabels,"#2F4F4F")
    array.push(allColorsLabels,"#1FCECB")
    array.push(allColorsLabels,"#004B49")
    array.push(allColorsLabels,"#0ABAB5")
    array.push(allColorsLabels,"#48D1CC")
    array.push(allColorsLabels,"#08E8DE")
    array.push(allColorsLabels,"#43B3AE")
    array.push(allColorsLabels,"#20B2AA")
    array.push(allColorsLabels,"#00FFEF")
    array.push(allColorsLabels,"#30D5C8")
    array.push(allColorsLabels,"#01796F")
    array.push(allColorsLabels,"#006D5B")
    array.push(allColorsLabels,"#96DED1")
    array.push(allColorsLabels,"#00755E")
    array.push(allColorsLabels,"#18453B")
    array.push(allColorsLabels,"#00CC99")
    array.push(allColorsLabels,"#006A4E")
    array.push(allColorsLabels,"#00563F")
    array.push(allColorsLabels,"#29AB87")
    array.push(allColorsLabels,"#49796B")
    array.push(allColorsLabels,"#88D8C0")
    array.push(allColorsLabels,"#1A2421")
    array.push(allColorsLabels,"#30BA8F")
    array.push(allColorsLabels,"#40826D")
    array.push(allColorsLabels,"#1C352D")
    array.push(allColorsLabels,"#45CEA2")
    array.push(allColorsLabels,"#7FFFD4")
    array.push(allColorsLabels,"#00A86B")
    array.push(allColorsLabels,"#3EB489")
    array.push(allColorsLabels,"#013220")
    array.push(allColorsLabels,"#00FA9A")
    array.push(allColorsLabels,"#009E60")
    array.push(allColorsLabels,"#00693E")
    array.push(allColorsLabels,"#66DDAA")
    array.push(allColorsLabels,"#006B3C")
    array.push(allColorsLabels,"#004225")
    array.push(allColorsLabels,"#AAF0D1")
    array.push(allColorsLabels,"#123524")
    array.push(allColorsLabels,"#177245")
    array.push(allColorsLabels,"#F5FFFA")
    array.push(allColorsLabels,"#00FF7F")
    array.push(allColorsLabels,"#014421")
    array.push(allColorsLabels,"#3CB371")
    array.push(allColorsLabels,"#2E8B57")
    array.push(allColorsLabels,"#4D5D53")
    array.push(allColorsLabels,"#A0D6B4")
    array.push(allColorsLabels,"#087830")
    array.push(allColorsLabels,"#3CD070")
    array.push(allColorsLabels,"#0BDA51")
    array.push(allColorsLabels,"#50C878")
    array.push(allColorsLabels,"#A3C1AD")
    array.push(allColorsLabels,"#059033")
    array.push(allColorsLabels,"#03C03C")
    array.push(allColorsLabels,"#1E4D2B")
    array.push(allColorsLabels,"#738678")
    array.push(allColorsLabels,"#B2BEB5")
    array.push(allColorsLabels,"#96C8A2")
    array.push(allColorsLabels,"#355E3B")
    array.push(allColorsLabels,"#71BC78")
    array.push(allColorsLabels,"#ACE1AF")
    array.push(allColorsLabels,"#76FF7A")
    array.push(allColorsLabels,"#F0FFF0")
    array.push(allColorsLabels,"#98FF98")
    array.push(allColorsLabels,"#00FF00")
    array.push(allColorsLabels,"#009000")
    array.push(allColorsLabels,"#008000")
    array.push(allColorsLabels,"#006600")
    array.push(allColorsLabels,"#98FB98")
    array.push(allColorsLabels,"#90EE90")
    array.push(allColorsLabels,"#32CD32")
    array.push(allColorsLabels,"#228B22")
    array.push(allColorsLabels,"#77DD77")
    array.push(allColorsLabels,"#ADDFAD")
    array.push(allColorsLabels,"#8FBC8F")
    array.push(allColorsLabels,"#465945")
    array.push(allColorsLabels,"#21421E")
    array.push(allColorsLabels,"#138808")
    array.push(allColorsLabels,"#A8E4A0")
    array.push(allColorsLabels,"#39FF14")
    array.push(allColorsLabels,"#74C365")
    array.push(allColorsLabels,"#4F7942")
    array.push(allColorsLabels,"#195905")
    array.push(allColorsLabels,"#3FFF00")
    array.push(allColorsLabels,"#4CBB17")
    array.push(allColorsLabels,"#2A8000")
    array.push(allColorsLabels,"#D0F0C0")
    array.push(allColorsLabels,"#85BB65")
    array.push(allColorsLabels,"#93C572")
    array.push(allColorsLabels,"#66FF00")
    array.push(allColorsLabels,"#A9BA9D")
    array.push(allColorsLabels,"#87A96B")
    array.push(allColorsLabels,"#507D2A")
    array.push(allColorsLabels,"#78866B")
    array.push(allColorsLabels,"#7CFC00")
    array.push(allColorsLabels,"#7FFF00")
    array.push(allColorsLabels,"#9AB973")
    array.push(allColorsLabels,"#B2EC5D")
    array.push(allColorsLabels,"#ADFF2F")
    array.push(allColorsLabels,"#556B2F")
    array.push(allColorsLabels,"#A7FC00")
    array.push(allColorsLabels,"#414833")
    array.push(allColorsLabels,"#9ACD32")
    array.push(allColorsLabels,"#6B8E23")
    array.push(allColorsLabels,"#BFFF00")
    array.push(allColorsLabels,"#A4C639")
    array.push(allColorsLabels,"#8DB600")
    array.push(allColorsLabels,"#C9DC87")
    array.push(allColorsLabels,"#BDDA57")
    array.push(allColorsLabels,"#CCFF00")
    array.push(allColorsLabels,"#4B5320")
    array.push(allColorsLabels,"#D1E231")

    array.push(allColorsLabels,"#006400")
    array.push(allColorsLabels,"#008000")
    array.push(allColorsLabels,"#556B2F")
    array.push(allColorsLabels,"#228B22")
    array.push(allColorsLabels,"#2E8B57")
    array.push(allColorsLabels,"#808000")
    array.push(allColorsLabels,"#6B8E23")
    array.push(allColorsLabels,"#3CB371")
    array.push(allColorsLabels,"#32CD32")
    array.push(allColorsLabels,"#00FF00")
    array.push(allColorsLabels,"#00FF7F")
    array.push(allColorsLabels,"#00FA9A")
    array.push(allColorsLabels,"#8FBC8F")
    array.push(allColorsLabels,"#66CDAA")
    array.push(allColorsLabels,"#9ACD32")
    array.push(allColorsLabels,"#7CFC00")
    array.push(allColorsLabels,"#7FFF00")
    array.push(allColorsLabels,"#90EE90")
    array.push(allColorsLabels,"#ADFF2F")
    array.push(allColorsLabels,"#98FB98")




    //===== Pine Builtin Colors
    array.push(allColorsLabels,"#4CAF50") //color.green
    array.push(allColorsLabels,"#00E676") //color.lime
    array.push(allColorsLabels,"#00897B") //color.teal
    array.push(allColorsLabels,"#00FF80")
    array.push(allColorsLabels,"#00FF00")
    array.push(allColorsLabels,"#80FF00")

    array.push(allColorsLabels,"#008000")
    array.push(allColorsLabels,"#66b032")
    array.push(allColorsLabels,"#98fb98")
    array.push(allColorsLabels,"#90ee90")
    array.push(allColorsLabels,"#00ff00")
    array.push(allColorsLabels,"#32cd32")
    array.push(allColorsLabels,"#3cb371")
    array.push(allColorsLabels,"#228b22")

    array.push(allColorsLabels,"#ADFF2F")
    array.push(allColorsLabels,"#7CFC00")
    array.push(allColorsLabels,"#00FF00")
    array.push(allColorsLabels,"#228B22")
    array.push(allColorsLabels,"#008000")
    array.push(allColorsLabels,"#006400")

    array.push(allColorsLabels,"#228B22")
    array.push(allColorsLabels,"#359835")
    array.push(allColorsLabels,"#5AB15A")
    array.push(allColorsLabels,"#6CBE6C")
    array.push(allColorsLabels,"#7FCB7F")
    array.push(allColorsLabels,"#91D891")
    array.push(allColorsLabels,"#A4E4A4")
    array.push(allColorsLabels,"#B6F1B6")
    array.push(allColorsLabels,"#C9FEC9")

    array.push(allColorsLabels,"#006400")
    array.push(allColorsLabels,"#167516")
    array.push(allColorsLabels,"#2D862D")
    array.push(allColorsLabels,"#439743")
    array.push(allColorsLabels,"#59A859")
    array.push(allColorsLabels,"#70BA70")
    array.push(allColorsLabels,"#86CB86")
    array.push(allColorsLabels,"#9CDC9C")
    array.push(allColorsLabels,"#B3EDB3")
    array.push(allColorsLabels,"#C9FEC9")

    array.push(allColorsLabels,"#006400")
    array.push(allColorsLabels,"#137505")
    array.push(allColorsLabels,"#26860A")
    array.push(allColorsLabels,"#3A9810")
    array.push(allColorsLabels,"#4DA915")
    array.push(allColorsLabels,"#60BA1A")
    array.push(allColorsLabels,"#73CB1F")
    array.push(allColorsLabels,"#87DD25")
    array.push(allColorsLabels,"#9AEE2A")
    array.push(allColorsLabels,"#ADFF2F")


    array.push(allColorsLabels,"#9ACD32")
    array.push(allColorsLabels,"#87F717")
    array.push(allColorsLabels,"#B1FB17")
    array.push(allColorsLabels,"#ADFF2F")
    array.push(allColorsLabels,"#DAEE01")
    array.push(allColorsLabels,"#E2F516")

    array.push(allColorsLabels,"#00BFA5")



    array.push(allColorsLabels,"#A5D6A7")
    array.push(allColorsLabels,"#81C784")
    array.push(allColorsLabels,"#66BB6A")
    array.push(allColorsLabels,"#4CAF50")
    array.push(allColorsLabels,"#43A047")
    array.push(allColorsLabels,"#388E3C")
    array.push(allColorsLabels,"#2E7D32")
    array.push(allColorsLabels,"#1B5E20")
    array.push(allColorsLabels,"#69F0AE")
    array.push(allColorsLabels,"#00E676")
    array.push(allColorsLabels,"#00C853")



    array.push(allColorsLabels,"#C5E1A5")
    array.push(allColorsLabels,"#AED581")
    array.push(allColorsLabels,"#9CCC65")
    array.push(allColorsLabels,"#8BC34A")
    array.push(allColorsLabels,"#7CB342")
    array.push(allColorsLabels,"#689F38")
    array.push(allColorsLabels,"#558B2F")
    array.push(allColorsLabels,"#33691E")
    array.push(allColorsLabels,"#CCFF90")
    array.push(allColorsLabels,"#B2FF59")
    array.push(allColorsLabels,"#76FF03")
    array.push(allColorsLabels,"#64DD17")

    array.push(allColorsLabels,"#00FFFF")
    array.push(allColorsLabels,"#008B8B")
    array.push(allColorsLabels,"#008080")
    array.push(allColorsLabels,"#007474")
    array.push(allColorsLabels,"#004242")
    array.push(allColorsLabels,"#004040")
    array.push(allColorsLabels,"#AFEEEE")
    array.push(allColorsLabels,"#2F4F4F")
    array.push(allColorsLabels,"#1FCECB")
    array.push(allColorsLabels,"#004B49")
    array.push(allColorsLabels,"#0ABAB5")
    array.push(allColorsLabels,"#48D1CC")
    array.push(allColorsLabels,"#08E8DE")
    array.push(allColorsLabels,"#43B3AE")
    array.push(allColorsLabels,"#20B2AA")
    array.push(allColorsLabels,"#00FFEF")
    array.push(allColorsLabels,"#30D5C8")
    array.push(allColorsLabels,"#01796F")
    array.push(allColorsLabels,"#006D5B")
    array.push(allColorsLabels,"#96DED1")
    array.push(allColorsLabels,"#00755E")
    array.push(allColorsLabels,"#18453B")
    array.push(allColorsLabels,"#00CC99")
    array.push(allColorsLabels,"#006A4E")
    array.push(allColorsLabels,"#00563F")
    array.push(allColorsLabels,"#29AB87")
    array.push(allColorsLabels,"#49796B")
    array.push(allColorsLabels,"#88D8C0")
    array.push(allColorsLabels,"#1A2421")
    array.push(allColorsLabels,"#30BA8F")
    array.push(allColorsLabels,"#40826D")
    array.push(allColorsLabels,"#1C352D")
    array.push(allColorsLabels,"#45CEA2")
    array.push(allColorsLabels,"#7FFFD4")
    array.push(allColorsLabels,"#00A86B")
    array.push(allColorsLabels,"#3EB489")
    array.push(allColorsLabels,"#013220")
    array.push(allColorsLabels,"#00FA9A")
    array.push(allColorsLabels,"#009E60")
    array.push(allColorsLabels,"#00693E")
    array.push(allColorsLabels,"#66DDAA")
    array.push(allColorsLabels,"#006B3C")
    array.push(allColorsLabels,"#004225")
    array.push(allColorsLabels,"#AAF0D1")
    array.push(allColorsLabels,"#123524")
    array.push(allColorsLabels,"#177245")
    array.push(allColorsLabels,"#F5FFFA")
    array.push(allColorsLabels,"#00FF7F")
    array.push(allColorsLabels,"#014421")
    array.push(allColorsLabels,"#3CB371")
    array.push(allColorsLabels,"#2E8B57")
    array.push(allColorsLabels,"#4D5D53")
    array.push(allColorsLabels,"#A0D6B4")
    array.push(allColorsLabels,"#087830")
    array.push(allColorsLabels,"#3CD070")
    array.push(allColorsLabels,"#0BDA51")
    array.push(allColorsLabels,"#50C878")
    array.push(allColorsLabels,"#A3C1AD")
    array.push(allColorsLabels,"#059033")
    array.push(allColorsLabels,"#03C03C")
    array.push(allColorsLabels,"#1E4D2B")
    array.push(allColorsLabels,"#738678")
    array.push(allColorsLabels,"#B2BEB5")
    array.push(allColorsLabels,"#96C8A2")
    array.push(allColorsLabels,"#355E3B")
    array.push(allColorsLabels,"#71BC78")
    array.push(allColorsLabels,"#ACE1AF")
    array.push(allColorsLabels,"#76FF7A")
    array.push(allColorsLabels,"#F0FFF0")
    array.push(allColorsLabels,"#98FF98")
    array.push(allColorsLabels,"#00FF00")
    array.push(allColorsLabels,"#009000")
    array.push(allColorsLabels,"#008000")
    array.push(allColorsLabels,"#006600")
    array.push(allColorsLabels,"#98FB98")
    array.push(allColorsLabels,"#90EE90")
    array.push(allColorsLabels,"#32CD32")
    array.push(allColorsLabels,"#228B22")
    array.push(allColorsLabels,"#77DD77")
    array.push(allColorsLabels,"#ADDFAD")
    array.push(allColorsLabels,"#8FBC8F")
    array.push(allColorsLabels,"#465945")
    array.push(allColorsLabels,"#21421E")
    array.push(allColorsLabels,"#138808")
    array.push(allColorsLabels,"#A8E4A0")
    array.push(allColorsLabels,"#39FF14")
    array.push(allColorsLabels,"#74C365")
    array.push(allColorsLabels,"#4F7942")
    array.push(allColorsLabels,"#195905")
    array.push(allColorsLabels,"#3FFF00")
    array.push(allColorsLabels,"#4CBB17")
    array.push(allColorsLabels,"#2A8000")
    array.push(allColorsLabels,"#D0F0C0")
    array.push(allColorsLabels,"#85BB65")
    array.push(allColorsLabels,"#93C572")
    array.push(allColorsLabels,"#66FF00")
    array.push(allColorsLabels,"#A9BA9D")
    array.push(allColorsLabels,"#87A96B")
    array.push(allColorsLabels,"#507D2A")
    array.push(allColorsLabels,"#78866B")
    array.push(allColorsLabels,"#7CFC00")
    array.push(allColorsLabels,"#7FFF00")
    array.push(allColorsLabels,"#9AB973")
    array.push(allColorsLabels,"#B2EC5D")
    array.push(allColorsLabels,"#ADFF2F")
    array.push(allColorsLabels,"#556B2F")
    array.push(allColorsLabels,"#A7FC00")
    array.push(allColorsLabels,"#414833")
    array.push(allColorsLabels,"#9ACD32")
    array.push(allColorsLabels,"#6B8E23")
    array.push(allColorsLabels,"#BFFF00")
    array.push(allColorsLabels,"#A4C639")
    array.push(allColorsLabels,"#8DB600")
    array.push(allColorsLabels,"#C9DC87")
    array.push(allColorsLabels,"#BDDA57")
    array.push(allColorsLabels,"#CCFF00")
    array.push(allColorsLabels,"#4B5320")
    array.push(allColorsLabels,"#D1E231")

    array.push(allColorsLabels,"#006400")
    array.push(allColorsLabels,"#008000")
    array.push(allColorsLabels,"#556B2F")
    array.push(allColorsLabels,"#228B22")
    array.push(allColorsLabels,"#2E8B57")
    array.push(allColorsLabels,"#808000")
    array.push(allColorsLabels,"#6B8E23")
    array.push(allColorsLabels,"#3CB371")
    array.push(allColorsLabels,"#32CD32")
    array.push(allColorsLabels,"#00FF00")
    array.push(allColorsLabels,"#00FF7F")
    array.push(allColorsLabels,"#00FA9A")
    array.push(allColorsLabels,"#8FBC8F")
    array.push(allColorsLabels,"#66CDAA")
    array.push(allColorsLabels,"#9ACD32")
    array.push(allColorsLabels,"#7CFC00")
    array.push(allColorsLabels,"#7FFF00")
    array.push(allColorsLabels,"#90EE90")
    array.push(allColorsLabels,"#ADFF2F")
    array.push(allColorsLabels,"#98FB98")


    array.push(allColors,#4CAF50)
    array.push(allColors,#00E676)
    array.push(allColors,#00897B)
    array.push(allColors,#00FF80)
    array.push(allColors,#00FF00)
    array.push(allColors,#80FF00)

    array.push(allColors,#008000)
    array.push(allColors,#66b032)
    array.push(allColors,#98fb98)
    array.push(allColors,#90ee90)
    array.push(allColors,#00ff00)
    array.push(allColors,#32cd32)
    array.push(allColors,#3cb371)
    array.push(allColors,#228b22)

    array.push(allColors,#ADFF2F)
    array.push(allColors,#7CFC00)
    array.push(allColors,#00FF00)
    array.push(allColors,#228B22)
    array.push(allColors,#008000)
    array.push(allColors,#006400)

    array.push(allColors,#228B22)
    array.push(allColors,#359835)
    array.push(allColors,#5AB15A)
    array.push(allColors,#6CBE6C)
    array.push(allColors,#7FCB7F)
    array.push(allColors,#91D891)
    array.push(allColors,#A4E4A4)
    array.push(allColors,#B6F1B6)
    array.push(allColors,#C9FEC9)

    array.push(allColors,#006400)
    array.push(allColors,#167516)
    array.push(allColors,#2D862D)
    array.push(allColors,#439743)
    array.push(allColors,#59A859)
    array.push(allColors,#70BA70)
    array.push(allColors,#86CB86)
    array.push(allColors,#9CDC9C)
    array.push(allColors,#B3EDB3)
    array.push(allColors,#C9FEC9)

    array.push(allColors,#006400)
    array.push(allColors,#137505)
    array.push(allColors,#26860A)
    array.push(allColors,#3A9810)
    array.push(allColors,#4DA915)
    array.push(allColors,#60BA1A)
    array.push(allColors,#73CB1F)
    array.push(allColors,#87DD25)
    array.push(allColors,#9AEE2A)
    array.push(allColors,#ADFF2F)


    array.push(allColors,#9ACD32)
    array.push(allColors,#87F717)
    array.push(allColors,#B1FB17)
    array.push(allColors,#ADFF2F)
    array.push(allColors,#DAEE01)
    array.push(allColors,#E2F516)

    array.push(allColors,#00BFA5)



    array.push(allColors,#A5D6A7)
    array.push(allColors,#81C784)
    array.push(allColors,#66BB6A)
    array.push(allColors,#4CAF50)
    array.push(allColors,#43A047)
    array.push(allColors,#388E3C)
    array.push(allColors,#2E7D32)
    array.push(allColors,#1B5E20)
    array.push(allColors,#69F0AE)
    array.push(allColors,#00E676)
    array.push(allColors,#00C853)



    array.push(allColors,#C5E1A5)
    array.push(allColors,#AED581)
    array.push(allColors,#9CCC65)
    array.push(allColors,#8BC34A)
    array.push(allColors,#7CB342)
    array.push(allColors,#689F38)
    array.push(allColors,#558B2F)
    array.push(allColors,#33691E)
    array.push(allColors,#CCFF90)
    array.push(allColors,#B2FF59)
    array.push(allColors,#76FF03)
    array.push(allColors,#64DD17)

    array.push(allColors,#00FFFF)
    array.push(allColors,#008B8B)
    array.push(allColors,#008080)
    array.push(allColors,#007474)
    array.push(allColors,#004242)
    array.push(allColors,#004040)
    array.push(allColors,#AFEEEE)
    array.push(allColors,#2F4F4F)
    array.push(allColors,#1FCECB)
    array.push(allColors,#004B49)
    array.push(allColors,#0ABAB5)
    array.push(allColors,#48D1CC)
    array.push(allColors,#08E8DE)
    array.push(allColors,#43B3AE)
    array.push(allColors,#20B2AA)
    array.push(allColors,#00FFEF)
    array.push(allColors,#30D5C8)
    array.push(allColors,#01796F)
    array.push(allColors,#006D5B)
    array.push(allColors,#96DED1)
    array.push(allColors,#00755E)
    array.push(allColors,#18453B)
    array.push(allColors,#00CC99)
    array.push(allColors,#006A4E)
    array.push(allColors,#00563F)
    array.push(allColors,#29AB87)
    array.push(allColors,#49796B)
    array.push(allColors,#88D8C0)
    array.push(allColors,#1A2421)
    array.push(allColors,#30BA8F)
    array.push(allColors,#40826D)
    array.push(allColors,#1C352D)
    array.push(allColors,#45CEA2)
    array.push(allColors,#7FFFD4)
    array.push(allColors,#00A86B)
    array.push(allColors,#3EB489)
    array.push(allColors,#013220)
    array.push(allColors,#00FA9A)
    array.push(allColors,#009E60)
    array.push(allColors,#00693E)
    array.push(allColors,#66DDAA)
    array.push(allColors,#006B3C)
    array.push(allColors,#004225)
    array.push(allColors,#AAF0D1)
    array.push(allColors,#123524)
    array.push(allColors,#177245)
    array.push(allColors,#F5FFFA)
    array.push(allColors,#00FF7F)
    array.push(allColors,#014421)
    array.push(allColors,#3CB371)
    array.push(allColors,#2E8B57)
    array.push(allColors,#4D5D53)
    array.push(allColors,#A0D6B4)
    array.push(allColors,#087830)
    array.push(allColors,#3CD070)
    array.push(allColors,#0BDA51)
    array.push(allColors,#50C878)
    array.push(allColors,#A3C1AD)
    array.push(allColors,#059033)
    array.push(allColors,#03C03C)
    array.push(allColors,#1E4D2B)
    array.push(allColors,#738678)
    array.push(allColors,#B2BEB5)
    array.push(allColors,#96C8A2)
    array.push(allColors,#355E3B)
    array.push(allColors,#71BC78)
    array.push(allColors,#ACE1AF)
    array.push(allColors,#76FF7A)
    array.push(allColors,#F0FFF0)
    array.push(allColors,#98FF98)
    array.push(allColors,#00FF00)
    array.push(allColors,#009000)
    array.push(allColors,#008000)
    array.push(allColors,#006600)
    array.push(allColors,#98FB98)
    array.push(allColors,#90EE90)
    array.push(allColors,#32CD32)
    array.push(allColors,#228B22)
    array.push(allColors,#77DD77)
    array.push(allColors,#ADDFAD)
    array.push(allColors,#8FBC8F)
    array.push(allColors,#465945)
    array.push(allColors,#21421E)
    array.push(allColors,#138808)
    array.push(allColors,#A8E4A0)
    array.push(allColors,#39FF14)
    array.push(allColors,#74C365)
    array.push(allColors,#4F7942)
    array.push(allColors,#195905)
    array.push(allColors,#3FFF00)
    array.push(allColors,#4CBB17)
    array.push(allColors,#2A8000)
    array.push(allColors,#D0F0C0)
    array.push(allColors,#85BB65)
    array.push(allColors,#93C572)
    array.push(allColors,#66FF00)
    array.push(allColors,#A9BA9D)
    array.push(allColors,#87A96B)
    array.push(allColors,#507D2A)
    array.push(allColors,#78866B)
    array.push(allColors,#7CFC00)
    array.push(allColors,#7FFF00)
    array.push(allColors,#9AB973)
    array.push(allColors,#B2EC5D)
    array.push(allColors,#ADFF2F)
    array.push(allColors,#556B2F)
    array.push(allColors,#A7FC00)
    array.push(allColors,#414833)
    array.push(allColors,#9ACD32)
    array.push(allColors,#6B8E23)
    array.push(allColors,#BFFF00)
    array.push(allColors,#A4C639)
    array.push(allColors,#8DB600)
    array.push(allColors,#C9DC87)
    array.push(allColors,#BDDA57)
    array.push(allColors,#CCFF00)
    array.push(allColors,#4B5320)
    array.push(allColors,#D1E231)

    array.push(allColors,#006400)
    array.push(allColors,#008000)
    array.push(allColors,#556B2F)
    array.push(allColors,#228B22)
    array.push(allColors,#2E8B57)
    array.push(allColors,#808000)
    array.push(allColors,#6B8E23)
    array.push(allColors,#3CB371)
    array.push(allColors,#32CD32)
    array.push(allColors,#00FF00)
    array.push(allColors,#00FF7F)
    array.push(allColors,#00FA9A)
    array.push(allColors,#8FBC8F)
    array.push(allColors,#66CDAA)
    array.push(allColors,#9ACD32)
    array.push(allColors,#7CFC00)
    array.push(allColors,#7FFF00)
    array.push(allColors,#90EE90)
    array.push(allColors,#ADFF2F)
    array.push(allColors,#98FB98)




    //===== Pine Builtin Colors
    array.push(allColors,#4CAF50) //color.green
    array.push(allColors,#00E676) //color.lime
    array.push(allColors,#00897B) //color.teal
    array.push(allColors,#00FF80)
    array.push(allColors,#00FF00)
    array.push(allColors,#80FF00)

    array.push(allColors,#008000)
    array.push(allColors,#66b032)
    array.push(allColors,#98fb98)
    array.push(allColors,#90ee90)
    array.push(allColors,#00ff00)
    array.push(allColors,#32cd32)
    array.push(allColors,#3cb371)
    array.push(allColors,#228b22)

    array.push(allColors,#ADFF2F)
    array.push(allColors,#7CFC00)
    array.push(allColors,#00FF00)
    array.push(allColors,#228B22)
    array.push(allColors,#008000)
    array.push(allColors,#006400)

    array.push(allColors,#228B22)
    array.push(allColors,#359835)
    array.push(allColors,#5AB15A)
    array.push(allColors,#6CBE6C)
    array.push(allColors,#7FCB7F)
    array.push(allColors,#91D891)
    array.push(allColors,#A4E4A4)
    array.push(allColors,#B6F1B6)
    array.push(allColors,#C9FEC9)

    array.push(allColors,#006400)
    array.push(allColors,#167516)
    array.push(allColors,#2D862D)
    array.push(allColors,#439743)
    array.push(allColors,#59A859)
    array.push(allColors,#70BA70)
    array.push(allColors,#86CB86)
    array.push(allColors,#9CDC9C)
    array.push(allColors,#B3EDB3)
    array.push(allColors,#C9FEC9)

    array.push(allColors,#006400)
    array.push(allColors,#137505)
    array.push(allColors,#26860A)
    array.push(allColors,#3A9810)
    array.push(allColors,#4DA915)
    array.push(allColors,#60BA1A)
    array.push(allColors,#73CB1F)
    array.push(allColors,#87DD25)
    array.push(allColors,#9AEE2A)
    array.push(allColors,#ADFF2F)


    array.push(allColors,#9ACD32)
    array.push(allColors,#87F717)
    array.push(allColors,#B1FB17)
    array.push(allColors,#ADFF2F)
    array.push(allColors,#DAEE01)
    array.push(allColors,#E2F516)

    array.push(allColors,#00BFA5)



    array.push(allColors,#A5D6A7)
    array.push(allColors,#81C784)
    array.push(allColors,#66BB6A)
    array.push(allColors,#4CAF50)
    array.push(allColors,#43A047)
    array.push(allColors,#388E3C)
    array.push(allColors,#2E7D32)
    array.push(allColors,#1B5E20)
    array.push(allColors,#69F0AE)
    array.push(allColors,#00E676)
    array.push(allColors,#00C853)



    array.push(allColors,#C5E1A5)
    array.push(allColors,#AED581)
    array.push(allColors,#9CCC65)
    array.push(allColors,#8BC34A)
    array.push(allColors,#7CB342)
    array.push(allColors,#689F38)
    array.push(allColors,#558B2F)
    array.push(allColors,#33691E)
    array.push(allColors,#CCFF90)
    array.push(allColors,#B2FF59)
    array.push(allColors,#76FF03)
    array.push(allColors,#64DD17)

    array.push(allColors,#00FFFF)
    array.push(allColors,#008B8B)
    array.push(allColors,#008080)
    array.push(allColors,#007474)
    array.push(allColors,#004242)
    array.push(allColors,#004040)
    array.push(allColors,#AFEEEE)
    array.push(allColors,#2F4F4F)
    array.push(allColors,#1FCECB)
    array.push(allColors,#004B49)
    array.push(allColors,#0ABAB5)
    array.push(allColors,#48D1CC)
    array.push(allColors,#08E8DE)
    array.push(allColors,#43B3AE)
    array.push(allColors,#20B2AA)
    array.push(allColors,#00FFEF)
    array.push(allColors,#30D5C8)
    array.push(allColors,#01796F)
    array.push(allColors,#006D5B)
    array.push(allColors,#96DED1)
    array.push(allColors,#00755E)
    array.push(allColors,#18453B)
    array.push(allColors,#00CC99)
    array.push(allColors,#006A4E)
    array.push(allColors,#00563F)
    array.push(allColors,#29AB87)
    array.push(allColors,#49796B)
    array.push(allColors,#88D8C0)
    array.push(allColors,#1A2421)
    array.push(allColors,#30BA8F)
    array.push(allColors,#40826D)
    array.push(allColors,#1C352D)
    array.push(allColors,#45CEA2)
    array.push(allColors,#7FFFD4)
    array.push(allColors,#00A86B)
    array.push(allColors,#3EB489)
    array.push(allColors,#013220)
    array.push(allColors,#00FA9A)
    array.push(allColors,#009E60)
    array.push(allColors,#00693E)
    array.push(allColors,#66DDAA)
    array.push(allColors,#006B3C)
    array.push(allColors,#004225)
    array.push(allColors,#AAF0D1)
    array.push(allColors,#123524)
    array.push(allColors,#177245)
    array.push(allColors,#F5FFFA)
    array.push(allColors,#00FF7F)
    array.push(allColors,#014421)
    array.push(allColors,#3CB371)
    array.push(allColors,#2E8B57)
    array.push(allColors,#4D5D53)
    array.push(allColors,#A0D6B4)
    array.push(allColors,#087830)
    array.push(allColors,#3CD070)
    array.push(allColors,#0BDA51)
    array.push(allColors,#50C878)
    array.push(allColors,#A3C1AD)
    array.push(allColors,#059033)
    array.push(allColors,#03C03C)
    array.push(allColors,#1E4D2B)
    array.push(allColors,#738678)
    array.push(allColors,#B2BEB5)
    array.push(allColors,#96C8A2)
    array.push(allColors,#355E3B)
    array.push(allColors,#71BC78)
    array.push(allColors,#ACE1AF)
    array.push(allColors,#76FF7A)
    array.push(allColors,#F0FFF0)
    array.push(allColors,#98FF98)
    array.push(allColors,#00FF00)
    array.push(allColors,#009000)
    array.push(allColors,#008000)
    array.push(allColors,#006600)
    array.push(allColors,#98FB98)
    array.push(allColors,#90EE90)
    array.push(allColors,#32CD32)
    array.push(allColors,#228B22)
    array.push(allColors,#77DD77)
    array.push(allColors,#ADDFAD)
    array.push(allColors,#8FBC8F)
    array.push(allColors,#465945)
    array.push(allColors,#21421E)
    array.push(allColors,#138808)
    array.push(allColors,#A8E4A0)
    array.push(allColors,#39FF14)
    array.push(allColors,#74C365)
    array.push(allColors,#4F7942)
    array.push(allColors,#195905)
    array.push(allColors,#3FFF00)
    array.push(allColors,#4CBB17)
    array.push(allColors,#2A8000)
    array.push(allColors,#D0F0C0)
    array.push(allColors,#85BB65)
    array.push(allColors,#93C572)
    array.push(allColors,#66FF00)
    array.push(allColors,#A9BA9D)
    array.push(allColors,#87A96B)
    array.push(allColors,#507D2A)
    array.push(allColors,#78866B)
    array.push(allColors,#7CFC00)
    array.push(allColors,#7FFF00)
    array.push(allColors,#9AB973)
    array.push(allColors,#B2EC5D)
    array.push(allColors,#ADFF2F)
    array.push(allColors,#556B2F)
    array.push(allColors,#A7FC00)
    array.push(allColors,#414833)
    array.push(allColors,#9ACD32)
    array.push(allColors,#6B8E23)
    array.push(allColors,#BFFF00)
    array.push(allColors,#A4C639)
    array.push(allColors,#8DB600)
    array.push(allColors,#C9DC87)
    array.push(allColors,#BDDA57)
    array.push(allColors,#CCFF00)
    array.push(allColors,#4B5320)
    array.push(allColors,#D1E231)

    array.push(allColors,#006400)
    array.push(allColors,#008000)
    array.push(allColors,#556B2F)
    array.push(allColors,#228B22)
    array.push(allColors,#2E8B57)
    array.push(allColors,#808000)
    array.push(allColors,#6B8E23)
    array.push(allColors,#3CB371)
    array.push(allColors,#32CD32)
    array.push(allColors,#00FF00)
    array.push(allColors,#00FF7F)
    array.push(allColors,#00FA9A)
    array.push(allColors,#8FBC8F)
    array.push(allColors,#66CDAA)
    array.push(allColors,#9ACD32)
    array.push(allColors,#7CFC00)
    array.push(allColors,#7FFF00)
    array.push(allColors,#90EE90)
    array.push(allColors,#ADFF2F)
    array.push(allColors,#98FB98)





// @function Print value
// @param message Value (string)
debug(value) =>
    table.cell(table_id = debugTable, column = 0, row = 0, text = str.tostring(value), text_color=color.new(color.white,0), text_size=size.normal)

// bgcolor(color=chartBackgroundColor, offset=0, editable=true, title="Background Color", display=display.all)

// allColors
// allColors
// allColors
// allColors
var bar_color=color.lime
var label_color=""
if(colorCounter < array.size(allColors))
    bar_color := array.get(allColors,colorCounter)
    label_color :=array.get(allColorsLabels,colorCounter)

    if(colorCounterIncrement < 5)
        colorCounterIncrement := colorCounterIncrement + 1
    else
        colorCounterIncrement := 0
        colorCounter := colorCounter + 1
else
    colorCounter := 0
    colorCounterIncrement := 0
    bar_color := array.get(allColors,colorCounter)
    label_color :=array.get(allColorsLabels,colorCounter)

//plotshape(series=colorCounter == 0, title="Color", style=shape.labeldown, location=location.abovebar, color=color.red, text='New Color', textcolor=color.new(color.white, 0))
if(colorCounter == 0)
    label.new(x=bar_index, y=na, text="Color",yloc = yloc.abovebar,color = color.red, textcolor = color.new(color.white,0), size = size.normal)

if(colorCounterIncrement == 5)
    label.new(x=bar_index, y=na, text=label_color,yloc = yloc.abovebar,color = chartDebugColor, textcolor = color.new(color.white,0), size = size.normal)


//barcolor(color = bar_color, offset=0, editable=true, title="Candle Colors", display=display.all)
plotcandle(open=open, high=high, low=low, close=close, title='Candle Colors', color = bar_color, wickcolor=color.white,bordercolor=bar_color,display=display.all)

//plot(series=nz(1), title="Color", style=plot.style_columns, color=bar_color)

debugMessage=( "last_bar_index: " + str.tostring(last_bar_index) + " \n bar_index: " + str.tostring(bar_index) + " \n todaysBars: " + str.tostring(todaysBars))
debug(debugMessage)

if barstate.islast or barstate.isrealtime
    debug(debugMessage)
// hline( price = 300, title = "300", color = color.lime, linestyle = hline.style_solid, linewidth=3, editable=true, display=display.all)
// hline( price = 320, title = "320", color = color.green, linestyle = hline.style_solid, linewidth=3, editable=true, display=display.all)
// hline( price = 340, title = "340", color = color.gray, linestyle = hline.style_solid, linewidth=3, editable=true, display=display.all)
// hline( price = 360, title = "360", color = color.maroon, linestyle = hline.style_solid, linewidth=3, editable=true, display=display.all)
// hline( price = 370, title = "370", color = color.red, linestyle = hline.style_solid, linewidth=3, editable=true, display=display.all)

